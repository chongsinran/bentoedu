<ion-header>
<div style="display:flex; align-items:center">
  <ion-button class="ion-no-padding" style="width:30px;" (click)="back()"  fill="clear" shape="round">
    <ion-icon name="chevron-back-outline"></ion-icon>

  </ion-button>
  <img  style=" margin:10px;height: 30px;width:30px; object-fit: cover;border-radius: 100%;"src="{{user.picture}}" alt="">
  <div>Group Chat</div>
</div>
    

</ion-header>

<ion-content>
  <div class="messages">
    <div style="padding-top: 10px;"></div>
    <div *ngFor="let message of AllMessages; let i =index" style="margin: 2px;">
      <div *ngIf="message.userid!==user.userid" style="display: flex;">
        <img *ngIf="i==0 || i> 0 && AllMessages[i].userid!=AllMessages[i-1].userid"
          style=" margin-left:10px;height: 30px;width:30px; object-fit: cover;border-radius: 100%;" src="{{message.picture}}" alt="">
        <div *ngIf="!(i==0 || i> 0 && AllMessages[i].userid!=AllMessages[i-1].userid)"
          style="margin-left:10px;height: 30px;width:30px; object-fit: cover;border-radius: 100%;"></div>

        <div
          style="margin : 0 5px;border-radius: 12px; color: white;background: rgb(77, 77, 77);max-width: 70vw; min-width:30vw;padding: 10px;">
          <div style=" margin:5px 0px;font-size: x-small; font-weight: 700;">{{message.username}}</div>
          <div>{{message.message}}</div>
          <div style="margin:5px 0px;font-size: x-small; font-weight: 700; text-align: right;">{{message.date | date: 'short'}}</div>
        </div>

      </div>
      <div *ngIf="message.userid==user.userid" style="width:100vw; display: flex;justify-content: flex-end;">
        <div style="min-width:30vw;max-width: 60vw; border-radius: 12px;border: 1px solid black; padding: 10px;margin: 0px 5px;">
          <div>{{message.message}}</div>
          <div style="margin:5px 0px;font-size: x-small; font-weight: 700; text-align: right;">{{message.date | date: 'short'}}</div>
        </div>

      </div>

    </div>

  </div>
</ion-content>

<ion-footer>
  <div class="chatFooter">
    <ion-input placeholder="Enter Message" [(ngModel)]="messages"></ion-input>
    <ion-button (click)="sendMessage()" expand="block" fill="clear" shape="round">
      <ion-icon slot="end" name="send-outline"></ion-icon>
    </ion-button>
  </div>
</ion-footer>